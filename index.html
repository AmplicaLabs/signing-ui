<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <title>Frequency Signing dApp</title>
    <link rel="icon" type="image/x-icon" href="./favicon.ico">
    <style>
        .hidden {
            display: none;
        }
        .ready {
            display: block;
        }
        .container {
            display: flex;
            align-items: stretch;
        }
        .container div {
            flex-grow: 1;
        }
        .payload form textarea {
            height: 100px;
        }
        .invalid {
            border-color: red;
            border-width: 2px;
        }

    </style>
</head>
<body style="margin: 22px;">
<p>Token: <span id="unit">...</span></p>
<p>Current block number: <span id="current-block"></span></p>
<form id="setupForm">
    <label for="provider-list">Choose an Endpoint</label>
    <select id="provider-list" required>
        <option value="wss://rpc.rococo.frequency.xyz" name="rococo">Rococo</option>
<!--        <option value="wss://1.rpc.frequency.xyz" name="frequency">Mainnet</option>-->
        <option value="ws://localhost:9944" name="localhost">Localhost</option>
    </select>

    <label for="signing-address">Signing Address</label>
    <select id="signing-address" required></select>

    <button type="button" id="connectButton">Connect to Node</button>
</form>
<form id="create_msa_form" class="hidden extrinsic-form">
    <p>Click to create an MSA for the selected account if you need to before submitting one of the other extrinsics.</p>
    <button type="button" id="create_msa_button">Create MSA</button>
</form>

<form id="setupExtrinsic" class="hidden">
    <label for="extrinsics">Select Extrinsic</label>
    <select id="extrinsics">
        <option value="handles_claim_handle">handles.claim_handle</option>
        <option value="msa_create_sponsored_account_with_delegation">msa.create_sponsored_account_with_delegation</option>
        <option value="msa_grant_delegation">msa.grant_delegation</option>
        <option value="msa_add_public_key_to_msa">msa.add_public_key_to_msa</option>
        <option value="stateful_storage_apply_item_actions_with_signature">stateful_storage.apply_item_actions_with_signature</option>
        <option value="stateful_storage_upsert_page_with_signature">stateful_storage.upsert_page_with_signature</option>
        <option value="stateful_storage_delete_page_with_signature">stateful_storage.delete_page_with_signature</option>
    </select>
</form>

<div class="container">
    <div id='extrinsics_forms' class="hidden">
        <!-- HANDLES claim_handle -->
        <form id="handles_claim_handle" class="hidden extrinsic-form">
            <p><em>Claim Handle</em></p>
            <p>Prerequisite: Create MSA</p>
            <label for="claim_handle_msaOwnerKey">MSA Owner Key (AccountId32)</label>
            <select id="claim_handle_msaOwnerKey" required></select>

            <label for="claim_handle_handle">Desired Handle</label>
            <input id="claim_handle_handle" placeholder="handle text" required>

            <label for="claim_handle_expiration">Expiration Block</label>
            <input id="claim_handle_expiration" placeholder="0" required>

            <button type="button" id="handles_claim_handle_sign_button">Sign payload</button>
            <button type="button" id="handles_claim_handle_submit_button">Submit extrinsic</button>
        </form>

        <!-- MSA create_sponsored_account_with_delegation -->
        <form id="msa_create_sponsored_account_with_delegation" class="hidden extrinsic-form">
            <p><em>Create Sponsored Account With Delegation</em></p>
            <p>Prerequisite: Provider and Schema(s) must be created</p>

            <label for="create_sponsored_account_with_delegation_delegator_key">Delegator Key (AccountId32)</label>
            <select id="create_sponsored_account_with_delegation_delegator_key" required></select>

            <label for="create_sponsored_account_with_delegation_provider">Authorized Provider MSA Id</label>
            <input id="create_sponsored_account_with_delegation_provider" required>

            <label for="create_sponsored_account_with_delegation_schema_ids">Schema Ids</label>
            <input id="create_sponsored_account_with_delegation_schema_ids" placeholder="e.g. 1,2,3" required>

            <label for="create_sponsored_account_with_delegation_expiration">Expiration (blocks)</label>
            <input id="create_sponsored_account_with_delegation_expiration" placeholder="0" required>

            <button type="button" id="msa_create_sponsored_account_with_delegation_sign_button">Sign payload</button>
            <button type="button" id="msa_create_sponsored_account_with_delegation_submit_button">Submit extrinsic</button>

        </form>

        <!-- MSA  grant_delegation -->
        <form id="msa_grant_delegation" class="hidden extrinsic-form">
            <p><em>msa.grant_delegation</em></p>
            <p>Prerequisite: Create MSA, Provider must be created</p>

            <label for="grant_delegation_delegator_key">Delegator Key (AccountId32)</label>
            <select id="grant_delegation_delegator_key" required></select>

            <label for="grant_delegation_provider">Provider</label>
            <input id="grant_delegation_provider" placeholder="provider MSA Id" required>

            <label for="grant_delegation_schema_ids">Schema Ids</label>
            <input id="grant_delegation_schema_ids" placeholder="e.g. 1,2,3" required>

            <label for="grant_delegation_expiration">Expiration (blocks)</label>
            <input id="grant_delegation_expiration" placeholder="0" required>

            <button type="button" id="msa_grant_delegation_sign_button">Sign payload</button>
            <button type="button" id="msa_grant_delegation_submit_button">Submit extrinsic</button>
        </form>

        <!-- MSA  add_public_key_to_msa -->
        <form id="msa_add_public_key_to_msa" class="hidden extrinsic-form">
            <p><em>msa.add_public_key_to_msa</em></p>
            <p>Prerequisite: Create MSA</p>

            <label for="add_public_key_to_msa_new_key">New MSA Owner Key (AccountId32></label>
            <select id="add_public_key_to_msa_new_key" required></select>

            <label for="add_public_key_to_msa_msa_id">MSA Id (number)</label>
            <input id="add_public_key_to_msa_msa_id" required>

            <label for="add_public_key_to_msa_expiration">Expiration (number)</label>
            <input id="add_public_key_to_msa_expiration" placeholder="# of blocks from now" required>

            <button type="button" id="add_public_key_to_msa_sign_button">Sign payload</button>
            <button type="button" id="add_public_key_to_msa_submit_button">Submit extrinsic</button>
        </form>

        <!-- STATEFUL STORAGE apply_item_actions_with_signature -->
        <form id="stateful_storage_apply_item_actions_with_signature" class="hidden extrinsic-form">
            <p><em>stateful_storage.apply_item_actions_with_signature</em></p>
            <p>Prerequisite: ______</p>

            <label for="apply_item_actions_with_signature_actions">Actions</label>
            <input id="apply_item_actions_with_signature_actions" placeholder="actions" required>

            <button type="button" id="apply_item_actions_with_signature_sign_button">Sign payload</button>
            <button type="button" id="apply_item_actions_with_signature_submit_button">Submit extrinsic</button>
        </form>

        <!-- STATEFUL STORAGE upsert_page_with_signature -->
        <form id="stateful_storage_upsert_page_with_signature" class="hidden extrinsic-form">
            <p><em>stateful_storage.upsert_page_with_signature</em></p>
            <p>Prerequisite: ______</p>

            <label for="upsert_page_with_signature_page">Page</label>
            <input id="upsert_page_with_signature_page" placeholder="page data" required>

            <button type="button" id="upsert_page_with_signature_sign_button">Sign payload</button>
            <button type="button" id="upsert_page_with_signature_submit_button">Submit extrinsic</button>
        </form>

        <!-- STATEFUL STORAGE  delete_page_with_signature -->
        <form id="stateful_storage_delete_page_with_signature" class="hidden extrinsic-form">
            <p><em>stateful_storage.delete_page_with_signature</em></p>
            <p>Prerequisite: ______</p>

            <label for="delete_page_with_signature_page">Page</label>
            <input id="delete_page_with_signature_page" placeholder="page data" required>

            <button type="button" id="delete_page_with_signature_sign_button">Sign payload</button>
            <button type="button" id="delete_page_with_signature_submit_button">Submit extrinsic</button>
        </form>
    </div>
    <div id='payload' class="hidden">
        <form id="payload_signature" class="clear_on_reset disable_on_reset right">
            <label for="signed_payload">Signed Payload</label>
            <textarea id="signed_payload" disabled></textarea>
        </form>
        <form id="payload_signature2" class="clear_on_reset disable_on_reset right">
            <p><em>For extrinsics that require two signatures</em></p>
            <label for="signed_payload2">Second Signed Payload</label>
            <textarea id="signed_payload2" disabled></textarea>
        </form>
    </div>


</div>


<footer>
    <link rel="stylesheet" href="//unpkg.com/mvp.css@1.12/mvp.css">
    <script src="./built/index.js" type="module"></script>
</footer>
</body>
</DOCTYPE>